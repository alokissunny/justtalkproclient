webpackJsonp([10],{xApt:function(l,n,e){"use strict";function t(l){return m["\u0275vid"](0,[(l()(),m["\u0275eld"](0,0,null,null,13,"div",[["class","reply"]],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["\n    "])),(l()(),m["\u0275eld"](2,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),m["\u0275ted"](3,null,["\n      "," "])),(l()(),m["\u0275eld"](4,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,[" wrote "])),(l()(),m["\u0275ted"](-1,null,["\n    "])),(l()(),m["\u0275ted"](-1,null,["\n    "])),(l()(),m["\u0275eld"](8,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),m["\u0275ted"](9,null,["\n      ","\n    "])),(l()(),m["\u0275ted"](-1,null,["\n    "])),(l()(),m["\u0275eld"](11,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),m["\u0275ted"](12,null,["Time : ",""])),(l()(),m["\u0275ted"](-1,null,["\n  "]))],null,function(l,n){var e=n.component;l(n,3,0,e.getReplierName(n.context.$implicit.repliedBy)),l(n,9,0,n.context.$implicit.message),l(n,12,0,e.getTime(n.context.$implicit))})}function u(l){return m["\u0275vid"](0,[(l()(),m["\u0275eld"](0,0,null,null,4,"ul",[["style","background-color: gainsboro ; "]],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275and"](16777216,null,null,1,null,t)),m["\u0275did"](3,802816,null,0,y.NgForOf,[m.ViewContainerRef,m.TemplateRef,m.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),m["\u0275ted"](-1,null,["\n"])),(l()(),m["\u0275ted"](-1,null,["\n"])),(l()(),m["\u0275eld"](6,0,null,null,4,"div",[["class","reply"]],null,null,null,null,null)),(l()(),m["\u0275ted"](7,null,["\n  ","\n  "])),(l()(),m["\u0275eld"](8,0,null,null,1,"button",[["style","float: right ;background: cadetblue; cursor: pointer;     border-radius: 1.5rem;"]],null,[[null,"click"]],function(l,n,e){var t=!0,u=l.component;if("click"===n){t=!1!==u.openReplyPopup()&&t}return t},null,null)),(l()(),m["\u0275ted"](-1,null,["Reply"])),(l()(),m["\u0275ted"](-1,null,["\n"]))],function(l,n){l(n,3,0,n.component.replies)},function(l,n){l(n,7,0,n.component.model.message)})}function a(l){return m["\u0275vid"](0,[(l()(),m["\u0275eld"](0,0,null,null,1,"app-message-detail",[],null,null,null,u,F)),m["\u0275did"](1,114688,null,0,R,[_.a,b.a],null,null)],function(l,n){l(n,1,0)},null)}function i(l){return m["\u0275vid"](0,[(l()(),m["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275eld"](2,0,null,null,1,"app-message-detail",[],null,null,null,u,F)),m["\u0275did"](3,114688,null,0,R,[_.a,b.a],{model:[0,"model"]},null),(l()(),m["\u0275ted"](-1,null,["\n"]))],function(l,n){l(n,3,0,n.component._dataModel)},null)}function d(l){return m["\u0275vid"](0,[m["\u0275pid"](0,S.a,[]),(l()(),m["\u0275eld"](1,0,null,null,22,"div",[],null,[[null,"click"]],function(l,n,e){var t=!0,u=l.component;if("click"===n){t=!1!==u.onMessageClick()&&t}return t},null,null)),m["\u0275did"](2,278528,null,0,y.NgClass,[m.IterableDiffers,m.KeyValueDiffers,m.ElementRef,m.Renderer],{ngClass:[0,"ngClass"]},null),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275eld"](4,0,null,null,3,"div",[["style","display: inline-block;\n    min-width: 200px;\n    max-width: 200px;"]],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,[" "])),(l()(),m["\u0275eld"](6,0,null,null,1,"span",[["id","from"]],null,null,null,null,null)),(l()(),m["\u0275ted"](7,null,[" "," "])),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275eld"](9,0,null,null,4,"div",[["style","display: inline-block;\n    min-width: 600px;\n    max-width: 600px;"]],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["\n    "])),(l()(),m["\u0275eld"](11,0,null,null,1,"span",[["id","subject"]],null,null,null,null,null)),(l()(),m["\u0275ted"](12,null,[" "," "])),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275eld"](15,0,null,null,5,"div",[["style","display: inline-block;\n    right: 100px"]],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["\n    "])),(l()(),m["\u0275eld"](17,0,null,null,2,"span",[["id","time"]],null,null,null,null,null)),(l()(),m["\u0275ted"](18,null,[" ",""])),m["\u0275ppd"](19,1),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275eld"](22,0,null,null,0,"i",[["class","ion-trash-a"],["style","float: right"]],null,[[null,"click"]],function(l,n,e){var t=!0,u=l.component;if("click"===n){t=!1!==u.deleteMessage()&&t}return t},null,null)),(l()(),m["\u0275ted"](-1,null,["\n"])),(l()(),m["\u0275ted"](-1,null,["\n"])),(l()(),m["\u0275and"](16777216,null,null,1,null,i)),m["\u0275did"](26,16384,null,0,y.NgIf,[m.ViewContainerRef,m.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,2,0,e.messageClass),l(n,26,0,e.showDetail)},function(l,n){var e=n.component;l(n,7,0,e.opponent),l(n,12,0,e.subject),l(n,18,0,m["\u0275unv"](n,18,0,l(n,19,0,m["\u0275nov"](n,0),e.time)))})}function r(l){return m["\u0275vid"](0,[(l()(),m["\u0275eld"](0,0,null,null,1,"app-message-row",[],null,null,null,d,P)),m["\u0275did"](1,114688,null,0,I,[b.a,k.a],null,null)],function(l,n){l(n,1,0)},null)}function o(l){return m["\u0275vid"](0,[(l()(),m["\u0275eld"](0,0,null,null,5,"div",[["style"," border-style: double;"]],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["\n     "])),(l()(),m["\u0275eld"](2,0,null,null,2,"app-message-row",[],null,[[null,"delete"]],function(l,n,e){var t=!0,u=l.component;if("delete"===n){t=!1!==u.removeMessage(e)&&t}return t},d,P)),m["\u0275did"](3,114688,null,0,I,[b.a,k.a],{dataModel:[0,"dataModel"]},{delete:"delete"}),(l()(),m["\u0275ted"](-1,null,["\n     "])),(l()(),m["\u0275ted"](-1,null,["\n  "]))],function(l,n){l(n,3,0,n.context.$implicit)},null)}function s(l){return m["\u0275vid"](0,[(l()(),m["\u0275eld"](0,0,null,null,4,"div",[["style","margin-top: 20% ; margin-left: 40%"]],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["\n    "])),(l()(),m["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["No Messages"])),(l()(),m["\u0275ted"](-1,null,["\n  "]))],null,null)}function p(l){return m["\u0275vid"](0,[(l()(),m["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275eld"](2,0,null,null,4,"ul",[],null,null,null,null,null)),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275and"](16777216,null,null,1,null,o)),m["\u0275did"](5,802816,null,0,y.NgForOf,[m.ViewContainerRef,m.TemplateRef,m.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275ted"](-1,null,["\n  "])),(l()(),m["\u0275and"](16777216,null,null,1,null,s)),m["\u0275did"](9,16384,null,0,y.NgIf,[m.ViewContainerRef,m.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),m["\u0275ted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,5,0,e.messages),l(n,9,0,0==e.messages.length)},null)}function c(l){return m["\u0275vid"](0,[(l()(),m["\u0275eld"](0,0,null,null,1,"messages",[],null,null,null,p,U)),m["\u0275did"](1,114688,null,0,N,[b.a,x.a,m.ChangeDetectorRef,k.a,x.m],null,null)],function(l,n){l(n,1,0)},null)}Object.defineProperty(n,"__esModule",{value:!0});var m=e("/oeL"),f=function(){function l(){}return l}(),g=[""],h=[".nonread[_ngcontent-%COMP%]{color:#000;font-weight:700}.nonread[_ngcontent-%COMP%], .read[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.read[_ngcontent-%COMP%]{color:#331b1b}"],v=[".reply[_ngcontent-%COMP%]{padding:10px}"],y=e("qbdv"),M=e("0WLp"),C=e("Pb4s"),b=e("QZnz"),R=function(){function l(l,n){this.modalService=l,this.messageService=n,this.refresh=new m.EventEmitter}return l.prototype.getTime=function(l){return new Date(l.repliedOn).toDateString()},l.prototype.ngOnInit=function(){this.replies=new Array,this.prepareReply(this.model.reply)},l.prototype.getReplierName=function(l){return this.messageService.currentUser==l?"you":l},l.prototype.prepareReply=function(l){void 0!=l&&(this.prepareReply(l.reply),this.replies.push(l))},l.prototype.openReplyPopup=function(){this.messageService.queryID=this.model._id,this.modalService.open(C.a,{size:"lg",container:"nb-layout"}).componentInstance.modalHeader="Large Modal"},l.ctorParameters=function(){return[{type:M.b},{type:b.a}]},l}(),_=e("dN2u"),w=[v],F=m["\u0275crt"]({encapsulation:0,styles:w,data:{}}),S=(m["\u0275ccf"]("app-message-detail",R,a,{model:"model"},{refresh:"refresh"},[]),e("9Zl+")),k=e("PXMJ"),I=function(){function l(l,n){this.messageService=l,this.userService=n,this.delete=new m.EventEmitter,this.messageClass="nonread"}return Object.defineProperty(l.prototype,"dataModel",{get:function(){return this._dataModel},set:function(l){this._dataModel=l,this.subject=this._dataModel.subject,this.message=this._dataModel.message,this.advisor=this._dataModel.advisor,this.time=this._dataModel.requestOn,this.lastUpdatedFrom=this._dataModel.lastUpdatedFrom,this.userService.getCurrentUser().username==this._dataModel.advisor?this.unread=this._dataModel.unreadForAdvisor:this.unread=this._dataModel.unreadForRequestor,this.id=this._dataModel._id,this.unread?this.messageClass="nonread":this.messageClass="read",this.opponent=this._dataModel.requestor==this.userService.getCurrentUser().username?this._dataModel.advisor:this._dataModel.requestor},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){},l.prototype.onMessageClick=function(){var l=this;this.messageService.readMessage(this.id,this.userService.getCurrentUser().username==this._dataModel.requestor).subscribe(function(){l.unread=!1,l.messageClass="read"}),this.showDetail=!this.showDetail},l.prototype.deleteMessage=function(){var l=this;this.messageService.deleteMessage(this.id,this.userService.getCurrentUser().username==this._dataModel.requestor).subscribe(function(){l.delete.emit({id:l.id})})},l.ctorParameters=function(){return[{type:b.a},{type:k.a}]},l}(),O=[h],P=m["\u0275crt"]({encapsulation:0,styles:O,data:{}}),x=(m["\u0275ccf"]("app-message-row",I,r,{dataModel:"dataModel"},{delete:"delete"},[]),e("BkNc")),D=e("xrDH"),N=function(){function l(l,n,e,t,u){this.messageService=l,this.route=n,this.cd=e,this.userService=t,this.router=u,this.messages=[]}return l.prototype.ngOnInit=function(){var l=this;this.userService.isSessionActive()?(this.messageService.refreshChannel.subscribe(function(){l.refresh()}),this.refresh()):this.router.navigateByUrl("/login")},l.prototype.refresh=function(){var l=this;this.messageService.getAllMessages().subscribe(function(n){l.messages=n,l.cd.markForCheck()})},l.prototype.removeMessage=function(l){var n=l.id;D.remove(this.messages,function(l){return n===l._id})},l.ctorParameters=function(){return[{type:b.a},{type:x.a},{type:m.ChangeDetectorRef},{type:k.a},{type:x.m}]},l}(),q=[g],U=m["\u0275crt"]({encapsulation:0,styles:q,data:{}}),B=m["\u0275ccf"]("messages",N,c,{},{},[]),L=e("w+Qo"),T=e("CVNG"),j=e("IkMs"),z=e("DlWC"),A=e("m0eP"),E=e("MsHi"),H=e("ClIn"),V=e("CU81"),K=e("bm2B"),W=e("hjRC"),Q=e("KRwK"),$=e("CPp0"),Y=e("/nNL"),Z=function(){function l(){}return l}(),J=e("+S/n"),G=e("BMWL"),X=e("xSzo"),ll=e("0dqe"),nl=e("m1oH"),el=e("qkrk"),tl=e("HToe"),ul=e("9Y3Q"),al=e("3p+R"),il=e("1adR"),dl=e("y0h+"),rl=e("Zz+K"),ol=e("wnyu"),sl=e("tzcA"),pl=e("2waW"),cl=e("PY9B"),ml=e("IBeK"),fl=e("g5gQ"),gl=e("xBEz"),hl=e("PuIS"),vl=e("U0Tu"),yl=e("3rU7"),Ml=e("Cb36"),Cl=e("5h8W"),bl=e("6ade"),Rl=e("4HaF"),_l=e("DaIH"),wl=e("CC/A"),Fl=e("wYpu");e.d(n,"MessageModuleNgFactory",function(){return Sl});var Sl=m["\u0275cmf"](f,[],function(l){return m["\u0275mod"]([m["\u0275mpd"](512,m.ComponentFactoryResolver,m["\u0275CodegenComponentFactoryResolver"],[[8,[B,L.a,T.a,j.a,z.a,A.a,E.a,H.a,V.a]],[3,m.ComponentFactoryResolver],m.NgModuleRef]),m["\u0275mpd"](4608,y.NgLocalization,y.NgLocaleLocalization,[m.LOCALE_ID]),m["\u0275mpd"](4608,K["\u0275i"],K["\u0275i"],[]),m["\u0275mpd"](4608,K.FormBuilder,K.FormBuilder,[]),m["\u0275mpd"](4608,W.a,W.a,[]),m["\u0275mpd"](4608,_.a,_.a,[m.ComponentFactoryResolver,m.Injector,Q.a]),m["\u0275mpd"](4608,b.a,b.a,[$.f,k.a]),m["\u0275mpd"](4608,Y.a,Y.a,[$.f]),m["\u0275mpd"](512,x.q,x.q,[[2,x.v],[2,x.m]]),m["\u0275mpd"](512,Z,Z,[]),m["\u0275mpd"](512,y.CommonModule,y.CommonModule,[]),m["\u0275mpd"](512,K["\u0275ba"],K["\u0275ba"],[]),m["\u0275mpd"](512,K.FormsModule,K.FormsModule,[]),m["\u0275mpd"](512,K.ReactiveFormsModule,K.ReactiveFormsModule,[]),m["\u0275mpd"](512,J.a,J.a,[]),m["\u0275mpd"](512,G.a,G.a,[]),m["\u0275mpd"](512,X.a,X.a,[]),m["\u0275mpd"](512,ll.a,ll.a,[]),m["\u0275mpd"](512,nl.a,nl.a,[]),m["\u0275mpd"](512,el.a,el.a,[]),m["\u0275mpd"](512,tl.a,tl.a,[]),m["\u0275mpd"](512,ul.a,ul.a,[]),m["\u0275mpd"](512,al.a,al.a,[]),m["\u0275mpd"](512,il.a,il.a,[]),m["\u0275mpd"](512,dl.a,dl.a,[]),m["\u0275mpd"](512,rl.a,rl.a,[]),m["\u0275mpd"](512,ol.a,ol.a,[]),m["\u0275mpd"](512,sl.a,sl.a,[]),m["\u0275mpd"](512,pl.a,pl.a,[]),m["\u0275mpd"](512,cl.a,cl.a,[]),m["\u0275mpd"](512,ml.a,ml.a,[]),m["\u0275mpd"](512,fl.a,fl.a,[]),m["\u0275mpd"](512,gl.c,gl.c,[]),m["\u0275mpd"](512,hl.a,hl.a,[]),m["\u0275mpd"](512,vl.a,vl.a,[]),m["\u0275mpd"](512,yl.a,yl.a,[]),m["\u0275mpd"](512,Ml.a,Ml.a,[]),m["\u0275mpd"](512,Cl.a,Cl.a,[]),m["\u0275mpd"](512,bl.a,bl.a,[]),m["\u0275mpd"](512,Rl.a,Rl.a,[]),m["\u0275mpd"](512,_l.a,_l.a,[]),m["\u0275mpd"](512,M.c,M.c,[]),m["\u0275mpd"](512,wl.a,wl.a,[]),m["\u0275mpd"](512,Fl.a,Fl.a,[]),m["\u0275mpd"](512,f,f,[]),m["\u0275mpd"](1024,x.k,function(){return[[{path:"",component:N}]]},[])])})}});